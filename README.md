# ত্রিফুল আরোগ্য নিকেতন - অ্যাপ্লিকেশন ডকুমেন্টেশন

এই ডকুমেন্টটি "ত্রিফুল আরোগ্য নিকেতন" অ্যাপ্লিকেশনটির গঠন, প্রযুক্তি, এবং কার্যকারিতা সম্পর্কে একটি বিস্তারিত বিবরণ প্রদান করে।

---

## ১. ব্যবহৃত প্রধান প্রযুক্তি

*   **ফ্রেমওয়ার্ক:** Next.js (React Framework)
*   **ভাষা:** TypeScript
*   **স্টাইলিং:** Tailwind CSS
*   **UI কম্পোনেন্ট:** ShadCN UI
*   **ডাটাবেস ও অথেন্টিকেশন:** Firebase (Firestore, Authentication)
*   **হোস্টিং:** Firebase App Hosting
*   **AI সুবিধা:** Google Genkit (Gemini মডেল)
*   **ভয়েস টাইপিং:** Web Speech API (ব্রাউজার ভিত্তিক)
*   **কুরিয়ার সার্ভিস:** Steadfast Courier API

---

## ২. প্রজেক্টের ফোল্ডার গঠন (Project Structure)

অ্যাপ্লিকেশনটির কোডগুলো একটি সুনির্দিষ্ট ফোল্ডার কাঠামোতে সাজানো হয়েছে, যা নিচে বর্ণনা করা হলো:

*   **`src/app/`**: এটি Next.js অ্যাপ্লিকেশনের মূল কেন্দ্র, যেখানে সমস্ত পেজ এবং লেআউট থাকে।
    *   **`(app)/`**: এই ফোল্ডারে থাকা সমস্ত পেজ ব্যবহারকারী লগইন করার পরেই কেবল অ্যাক্সেস করতে পারে। এটি একটি সুরক্ষিত রুট গ্রুপ।
        *   `dashboard/`: অ্যাপ্লিকেশনের প্রধান ড্যাশবোর্ড।
        *   `entry/`: নতুন রোগী নিবন্ধন করার পেজ।
        *   `search/`: নিবন্ধিত রোগীদের খুঁজে বের করার পেজ।
        *   `dictionary/`: বর্ণমালা অনুযায়ী রোগীদের তালিকা দেখানোর পেজ।
        *   `report/`: দৈনিক, সাপ্তাহিক, মাসিক বা কাস্টম রিপোর্ট তৈরির পেজ।
        *   `slip/`: সকল পেমেন্ট স্লিপ খোঁজার এবং দেখার পেজ।
        *   `prescription/[patientId]/`: নির্দিষ্ট রোগীর জন্য প্রেসক্রিপশন তৈরি বা এডিট করার পেজ।
        *   `ai-summary/`: AI ব্যবহার করে রোগীর অভিযোগ বিশ্লেষণ করার পেজ (AI রেপার্টরি)।
        *   `medicine-instructions/`: ঔষধ খাওয়ার নিয়মাবলী প্রিন্ট করার পেজ।
        *   `clinic-information/`: ক্লিনিকের তথ্য (নাম, ঠিকানা) সেট করার পেজ।
        *   `settings/`: অ্যাপ্লিকেশনের বিভিন্ন সেটিংস (যেমন: থিম, ডেটা এক্সপোর্ট) পরিচালনা করার পেজ।
        *   `courier/`: Steadfast Courier-এর মাধ্যমে পার্সেল এবং অর্ডার পরিচালনা করার পেজ।
        *   `store-management/`, `personal-expenses/`: ভবিষ্যৎ ফিচারের জন্য সংরক্ষিত দুটি পেজ (বর্তমানে "Coming Soon" দেখানো হয়)।
    *   **`api/steadfast-webhook/`**: Steadfast Courier থেকে স্বয়ংক্রিয়ভাবে স্ট্যাটাস আপডেট গ্রহণ করার জন্য Webhook এন্ডপয়েন্ট।
    *   **`page.tsx`**: এটি অ্যাপ্লিকেশনের প্রধান **লগইন পেজ**। ব্যবহারকারীকে এখান থেকেই লগইন করতে হয়।
    *   **`layout.tsx`**: এটি সম্পূর্ণ অ্যাপ্লিকেশনের মূল লেআউট। এখানে থিম, অথেন্টিকেশন এবং অন্যান্য গ্লোবাল কনফিগারেশন যুক্ত করা আছে।
    *   **`globals.css`**: অ্যাপ্লিকেশনের সার্বিক ডিজাইন, যেমন রঙ, ফন্ট এবং অন্যান্য স্টাইল এখানে নির্ধারণ করা হয়।

*   **`src/components/`**: পুনরায় ব্যবহারযোগ্য UI কম্পונেন্টগুলো এখানে থাকে।
    *   **`shared/`**: বিভিন্ন পেজে ব্যবহৃত সাধারণ কম্পונেন্ট, যেমন: `AppSidebar`, `PageHeaderCard` এবং `FloatingVoiceInput`।
    *   **`ui/`**: ShadCN UI লাইব্রেরি থেকে তৈরি করা বেস কম্পונেন্ট (যেমন: Button, Card, Input)।
    *   **`patient/`**: রোগী সম্পর্কিত কম্পונেন্ট, যেমন `PatientDetailsModal` (রোগীর বিস্তারিত তথ্য দেখানোর মডাল)।
    *   **`slip/`**: পেমেন্ট স্লিপ সম্পর্কিত কম্পונেন্ট (যেমন: `CreatePaymentSlipModal`, `PaymentSlipModal`)।

*   **`src/lib/`**: অ্যাপ্লিকেশনের মূল লজিক, ফাংশন এবং সার্ভিসগুলো এখানে থাকে।
    *   **`firebase.ts`**: Firebase সংযোগ স্থাপন এবং কনফিগারেশনের জন্য ব্যবহৃত হয়।
    *   **`firestoreService.ts`**: **সবচেয়ে গুরুত্বপূর্ণ ফাইলগুলোর মধ্যে একটি।** Firestore ডাটাবেস থেকে তথ্য আনা, নতুন তথ্য যোগ করা বা আপডেট করার সমস্ত ফাংশন (যেমন: `getPatients`, `addVisit`, `getConsignments`) এখানে লেখা আছে।
    *   **`steadfastService.ts`**: Steadfast Courier API-এর সাথে সংযোগ স্থাপন এবং অর্ডার তৈরি বা স্ট্যাটাস চেক করার ফাংশনগুলো এখানে রয়েছে।
    *   **`constants.ts`**: পুরো অ্যাপ্লিকেশনে ব্যবহৃত ধ্রুবক বা কনস্ট্যান্ট (যেমন: বিভিন্ন রুটের নাম, অ্যাপের নাম) এখানে রাখা হয়।
    *   **`types.ts`**: TypeScript-এর জন্য বিভিন্ন ডেটা মডেলের (যেমন: Patient, Visit, SteadfastConsignment) গঠন বা schema এখানে ডিফাইন করা আছে।
    *   **`utils.ts`**: ছোটখাটো সাহায্যকারী ফাংশন এখানে থাকে।

*   **`src/ai/`**: Genkit এবং AI সম্পর্কিত সমস্ত কোড এখানে রয়েছে।
    *   **`genkit.ts`**: Genkit ইন্সট্যান্স শুরু করার জন্য ব্যবহৃত হয়।
    *   **`flows/`**: এই ফোল্ডারে AI দ্বারা চালিত বিভিন্ন কার্যকারিতার জন্য ফ্লো (flow) লেখা আছে।
        *   `suggest-remedies.ts`: এটি প্রধান AI ফ্লো, যা রোগীর লক্ষণসমূহ বিশ্লেষণ করে সেগুলোকে মানসিক, শারীরিক ও পূর্ব ইতিহাসে শ্রেণীবদ্ধ করে এবং বিভিন্ন Materia Medica (হ্যানিম্যান, বোরিকস, কেন্ট) ও নিজস্ব জ্ঞানের উপর ভিত্তি করে সম্ভাব্য ঔষধের একটি বিস্তারিত তালিকা প্রদান করে।
        *   `homeopathic-assistant-flow.ts`: এটি একটি বিশেষজ্ঞ ডাক্তারের সহকারীর মতো কাজ করে। রোগীর সম্পূর্ণ কেস-টেকিং ডেটা বিশ্লেষণ করে প্রধান লক্ষণ ও প্রতিকার সম্পর্কে পরামর্শ দেয়।
        *   `handwritten-patient-form-parser-flow.ts`: হাতে লেখা রোগীর নিবন্ধন ফর্মের ছবি থেকে AI ব্যবহার করে তথ্য (যেমন: নাম, ফোন, ঠিকানা) বের করে এবং ফর্মটি স্বয়ংক্রিয়ভাবে পূরণ করতে সাহায্য করে।
        *   `remedy-details.ts`: কোনো নির্দিষ্ট হোমিওপ্যাথিক ঔষধের নাম দিলে, এটি Materia Medica থেকে তার বিস্তারিত তথ্য (যেমন: বর্ণনা, মূল লক্ষণ, হ্রাস-বৃদ্ধি) প্রদান করে।
        *   `categorize-case-notes-flow.ts`: রোগীর unstructured নোটকে ৭টি প্রধান ক্যাটাগরিতে ভাগ করে, যা ডেটা সংগঠিত করতে সাহায্য করে।

*   **`src/contexts/`**: React Context API ব্যবহার করে গ্লোবাল স্টেট ম্যানেজমেন্ট করা হয়।
    *   **`AuthContext.tsx`**: ব্যবহারকারীর লগইন অবস্থা (user session) পরিচালনা করে এবং সুরক্ষিত পেজগুলোতে অ্যাক্সেস নিয়ন্ত্রণ করে।

*   **`.env`**: এই ফাইলে আপনার AI পরিষেবা এবং কুরিয়ার সার্ভিসের জন্য প্রয়োজনীয় API কী (`GEMINI_API_KEY`, `STEADFAST_API_KEY`, `STEADFAST_SECRET_KEY`) রাখতে হবে। এই কী ছাড়া ফিচারগুলো কাজ করবে না।

*   **`public/`**: স্ট্যাটিক ফাইল, যেমন ছবি, আইকন (`favicon.ico`) ইত্যাদি এখানে রাখা হয়।

---

## ৩. প্রধান ফিচার এবং কার্যকারিতা

#### ক. লগইন ও ড্যাশবোর্ড
*   **লগইন (`/src/app/page.tsx`):** ব্যবহারকারী ইমেইল/পাসওয়ার্ড বা Google অ্যাকাউন্ট দিয়ে লগইন করতে পারেন। `AuthContext` ব্যবহারকারীর লগইন অবস্থা যাচাই করে।
*   **ড্যাশবোর্ড (`/src/app/(app)/dashboard/page.tsx`):** লগইন করার পর এটিই প্রথম পেজ। এখানে Quick Actions, দৈনিক ও মাসিক কার্যকলাপের সারাংশ এবং আজকের সাক্ষাতের তালিকা দেখা যায়।

#### খ. রোগী ব্যবস্থাপনা
*   **নতুন রোগী ভর্তি (`/src/app/(app)/entry/page.tsx`):** নতুন রোগীর তথ্য (নাম, ফোন, ঠিকানা ইত্যাদি) এখানে নিবন্ধন করা হয় এবং `addPatient` ফাংশনের মাধ্যমে Firestore-এ সেভ করা হয়।
*   **রোগী অনুসন্ধান (`/src/app/(app)/search/page.tsx`):** নাম, ডায়েরি নম্বর বা ফোন নম্বর দিয়ে যেকোনো রোগীকে দ্রুত খুঁজে বের করা যায়। এখান থেকে রোগীর বিস্তারিত তথ্য দেখা, নতুন ভিজিট যুক্ত করা বা প্রেসক্রিপশন তৈরির কাজ শুরু করা যায়।
*   **রোগীর তালিকা (`/src/app/(app)/dictionary/page.tsx`):** বাংলা বর্ণমালা অনুযায়ী সকল নিবন্ধিত রোগীদের তালিকা দেখা যায়।

#### গ. চিকিৎসা ও প্রেসক্রিপশন
*   **প্রেসক্রিপশন তৈরি (`/src/app/(app)/prescription/[patientId]/page.tsx`):** রোগীর ভিজিটের উপর ভিত্তি করে প্রেসক্রিপশন তৈরি করা হয়। এখানে ঔষধের নাম, মাত্রা, সময়কাল ইত্যাদি যুক্ত করে প্রিন্ট করা যায়।
*   **ঔষধের নিয়মাবলী (`/src/app/(app)/medicine-instructions/page.tsx`):** প্রেসক্রিপশনের পাশাপাশি শুধু ঔষধ খাওয়ার নিয়মাবলী আলাদাভাবে প্রিন্ট করার জন্য এই পেজটি ব্যবহৃত হয়। এখানে দুটি ভিন্ন টেমপ্লেট রয়েছে।
*   **AI রেপার্টরি (`/src/app/(app)/ai-summary/page.tsx`):** এখানে রোগীর লক্ষণ বিস্তারিতভাবে লিখে দিলে, `suggest-remedies.ts`-এ থাকা AI ফ্লো সেটি বিশ্লেষণ করে। এটি লক্ষণগুলোকে মানসিক, শারীরিক ও পূর্ব ইতিহাসে ভাগ করে এবং বিভিন্ন Materia Medica-এর উপর ভিত্তি করে সেরা ঔষধগুলোর একটি তুলনামূলক তালিকা প্রদান করে, যা সিদ্ধান্ত গ্রহণে ডাক্তারকে সাহায্য করে।

#### ঘ. কুরিয়ার এবং Webhook
*   **কুরিয়ার ম্যানেজমেন্ট (`/src/app/(app)/courier/page.tsx`):** Steadfast Courier API ব্যবহার করে সরাসরি অ্যাপ থেকে নতুন অর্ডার তৈরি করা, সকল অর্ডারের তালিকা দেখা এবং যেকোনো অর্ডারের বর্তমান স্ট্যাটাস ট্র্যাক করা যায়।
*   **স্বয়ংক্রিয় Webhook (`/src/app/api/steadfast-webhook/route.ts`):** এটি একটি ব্যাকএন্ড এন্ডপয়েন্ট, যা Steadfast থেকে পাঠানো স্বয়ংক্রিয় নোটিফিকেশন গ্রহণ করে। যখন কোনো পার্সেলের স্ট্যাটাস (যেমন: 'Delivered', 'Cancelled') পরিবর্তন হয়, তখন এই Webhook আপনার অ্যাপ্লিকেশনের ডেটাবেসকে স্বয়ংক্রিয়ভাবে আপডেট করে দেয়।

#### ঙ. ভয়েস টাইপিং
*   **ভাসমান ভয়েস বাটন (`/src/components/shared/FloatingVoiceInput.tsx`):** এটি একটি গ্লোবাল কম্পונেন্ট যা সব পেজের উপরে ভেসে থাকে। কীবোর্ডের `V` কী চাপলে যেকোনো ইনপুট ফিল্ডে স্বয়ংক্রিয়ভাবে বাংলা টাইপ হয়ে যায়। এটি Web Speech API ব্যবহার করে কাজ করে।

#### চ. রিপোর্ট এবং স্লিপ
*   **প্রতিবেদন (`/src/app/(app)/report/page.tsx`):** দৈনিক, সাপ্তাহিক, মাসিক বা নির্দিষ্ট তারিখের পরিসরে মোট ভিজিট এবং আয়ের রিপোর্ট তৈরি করা যায়।
*   **পেমেন্ট স্লিপ (`/src/app/(app)/slip/page.tsx`):** সকল পেমেন্টের রেকর্ড বা স্লিপ এখানে খোঁজা যায় এবং বিস্তারিত দেখা যায়।

#### ছ. সেটিংস
*   **ক্লিনিকের তথ্য (`/src/app/(app)/clinic-information/page.tsx`):** প্রেসক্রিপশন এবং রিপোর্টে প্রদর্শনের জন্য ক্লিনিকের নাম, ডাক্তারের নাম, ঠিকানা ইত্যাদি এখানে সেট করা হয়, যা `getClinicSettings` ও `saveClinicSettings` ফাংশনের মাধ্যমে Firestore-এ সংরক্ষিত হয়।
*   **অ্যাপ সেটিংস (`/src/app/(app)/settings/page.tsx`):** অ্যাপ্লিকেশনের থিম (Light/Dark) পরিবর্তন এবং সকল ডেটা JSON ফরম্যাটে এক্সপোর্ট করার সুবিধা এখানে রয়েছে।

---

## ৪. কুরিয়ার Webhook সেটআপ

Steadfast Courier থেকে স্বয়ংক্রিয়ভাবে অর্ডারের স্ট্যাটাস আপডেট পেতে, আপনাকে তাদের পোর্টালে একটি Webhook কনফিগার করতে হবে।

1.  **Callback URL:** আপনার অ্যাপ্লিকেশনের Webhook URL হলো:
    ```
    [আপনার_অ্যাপ্লিকেশনের_ডোমেইন]/api/steadfast-webhook
    ```
    উদাহরণস্বরূপ: `https://your-app-name.firebaseapp.com/api/steadfast-webhook`

2.  **Authentication:** নিরাপত্তার জন্য, এই Webhook একটি `Bearer` টোকেন ব্যবহার করে। আপনার `.env` ফাইলে `STEADFAST_WEBHOOK_SECRET` নামে একটি সুরক্ষিত কী তৈরি করুন এবং সেই একই কী Steadfast পোর্টালে Webhook সেটআপ করার সময় ব্যবহার করুন।

---

## ৫. অ্যাপ্লিকেশন চালানো এবং ডিপ্লয়মেন্ট

*   **লোকাল মেশিনে চালানো:**
    1.  প্রয়োজনীয় প্যাকেজ ইনস্টল: `npm install`
    2.  ডেভেলপমেন্ট সার্ভার চালু: `npm run dev`
    3.  ব্রাউজারে `http://localhost:3000` ভিজিট করুন।

*   **Firebase-এ ডিপ্লয়মেন্ট:**
    *   অ্যাপ্লিকেশনটি `main` ব্রাঞ্চে পুশ করার সাথে সাথেই স্বয়ংক্রিয়ভাবে Firebase App Hosting-এ ডিপ্লয় হয়ে যায়।
    *   ডিপ্লয়মেন্টের বিস্তারিত নির্দেশিকা `DEPLOYMENT_GUIDE.md` ফাইলে দেখুন।

---

## ৬. ভবিষ্যৎ উন্নতির সম্ভাবনা (Future Enhancements)

এই অ্যাপ্লিকেশনটিকে ভবিষ্যতে আরও শক্তিশালী এবং ব্যবহারকারী-বান্ধব করার জন্য কিছু ফিচার যুক্ত করা যেতে পারে। নিচে কয়েকটি সম্ভাব্য ধারণা দেওয়া হলো:

#### ক. রোগী কেন্দ্রিক ফিচার
*   **রোগীর পোর্টাল (Patient Portal):**
    *   **বিবরণ:** রোগীদের জন্য একটি নিরাপদ লগইন সিস্টেম তৈরি করা, যেখানে তারা তাদের ব্যক্তিগত তথ্য, ভিজিটের ইতিহাস, প্রেসক্রিপশন এবং রিপোর্ট দেখতে পারবেন।
    *   **সুবিধা:** এটি রোগীদের নিজেদের স্বাস্থ্য সম্পর্কে আরও সচেতন করবে এবং ডাক্তারের সাথে যোগাযোগ সহজ করবে।

*   **অনলাইন অ্যাপয়েন্টমেন্ট বুকিং (Online Appointment Booking):**
    *   **বিবরণ:** রোগীরা সরাসরি অ্যাপ্লিকেশন ব্যবহার করে ডাক্তারের সাথে সাক্ষাতের জন্য সময় বুক করতে পারবেন। ক্যালেন্ডার দেখে নিজেদের সুবিধামতো স্লট বেছে নিতে পারবেন।
    *   **সুবিধা:** এটি ক্লিনিকের অ্যাপয়েন্টমেন্ট ব্যবস্থাপনা আরও সহজ করবে এবং রোগীদের জন্য সময় বাঁচাবে।

#### খ. অ্যানালিটিক্স এবং রিপোর্টিং
*   **ভিজ্যুয়াল ড্যাশবোর্ড (Visual Dashboard):**
    *   **বিবরণ:** `recharts` বা অন্য কোনো চার্টিং লাইব্রেরি ব্যবহার করে আয়ের প্রবণতা, নতুন রোগীর বৃদ্ধির হার, এবং সবচেয়ে সাধারণ রোগগুলোর উপর ভিত্তি করে গ্রাফ এবং চার্ট তৈরি করা।
    *   **সুবিধা:** এটি ক্লিনিকের সার্বিক পারফরম্যান্স এক নজরে বুঝতে সাহায্য করবে।

#### গ. ইনভেন্টরি এবং ম্যানেজমেন্ট
*   **পূর্ণাঙ্গ ঔষধ ব্যবস্থাপনা (Comprehensive Medicine Inventory):**
    *   **বিবরণ:** বর্তমান "ঔষধ ব্যবস্থাপনা" পেজটিকে একটি পূর্ণাঙ্গ ইনভেন্টরি সিস্টেমে রূপান্তরিত করা। এখানে ঔষধের স্টক, মেয়াদ উত্তীর্ণের তারিখ, সরবরাহকারীর তথ্য এবং পুনরায় অর্ডার করার জন্য রিমাইন্ডার সেট করার সুবিধা থাকবে।
    *   **সুবিধা:** ঔষধের অপচয় কমবে এবং স্টক ব্যবস্থাপনা সহজ হবে।

#### ঘ. যোগাযোগ এবং অ্যাক্সেসিবিলিটি
*   **বিজ্ঞপ্তি সিস্টেম (Notification System):**
    *   **বিবরণ:** রোগীদের অ্যাপয়েন্টমেন্টের একদিন আগে স্বয়ংক্রিয়ভাবে SMS বা ইমেল রিমাইন্ডার পাঠানোর ব্যবস্থা করা।
    *   **সুবিধা:** সাক্ষাতের দিন রোগীরা অনুপস্থিত থাকার হার কমবে।

*   **একাধিক ভাষা সমর্থন (Multi-language Support):**
    *   **বিবরণ:** বাংলা ভাষার পাশাপাশি ইংরেজি বা অন্য কোনো ভাষা যুক্ত করা, যা অ্যাপ্লিকেশনটিকে আরও বিস্তৃত ব্যবহারকারীর কাছে পৌঁছে দেবে।

#### ঙ. আধুনিক প্রযুক্তি
*   **টেলিমেডিসিন সুবিধা (Telemedicine Feature):**
    *   **বিবরণ:** ভিডিও কলের মাধ্যমে দূরবর্তী রোগীদের সাথে পরামর্শ করার সুবিধা যুক্ত করা। রোগীরা তাদের বাড়ি থেকেই ডাক্তারের সাথে কথা বলতে পারবেন।
    *   **সুবিধা:** এটি ক্লিনিকের পরিসেবা جغرافیائی حدودের বাইরে পৌঁছে দেবে।

এই ফিচারগুলো ধাপে ধাপে যুক্ত করার মাধ্যমে, "ত্রিফুল আরোগ্য নিকেতন" অ্যাপ্লিকেশনটি ভবিষ্যতে একটি পূর্ণাঙ্গ এবং আধুনিক হেলথ-টেক প্ল্যাটফর্মে রূপান্তরিত হতে পারে।
